<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Fox & The Winter Moon</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Lato:wght@300;400&family=Pinyon+Script&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="dist/output.css" />

    <script
      type="module"
      src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"
    ></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              midnight: { 900: "#020617", 800: "#0f172a" },
              fox: { orange: "#FF8C42", gold: "#F59E0B" },
            },
            fontFamily: {
              fantasy: ["Cinzel", "serif"],
              script: ["Pinyon Script", "cursive"],
              body: ["Lato", "sans-serif"],
            },
            animation: {
              "fade-up": "fadeUp 1s ease-out forwards",
              breathe: "breathe 6s ease-in-out infinite",
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="bg-midnight-900 text-white font-body overflow-x-hidden w-full relative"
  >
    <div
      id="preloader"
      class="fixed inset-0 z-[100] bg-midnight-900 flex flex-col items-center justify-center transition-opacity duration-1000"
    >
      <div
        class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-fox-orange mb-4"
      ></div>
      <p
        class="font-fantasy tracking-[0.3em] text-sm animate-pulse text-white/70"
      >
        SUMMONING THE FOX...
      </p>
    </div>

    <nav
      class="fixed w-full z-50 top-0 px-8 py-6 flex justify-between items-center bg-gradient-to-b from-midnight-900/90 to-transparent opacity-0 animate-fade-up"
      style="animation-delay: 1.5s"
    >
      <div
        class="text-xl font-fantasy font-bold tracking-widest text-white hover:text-fox-orange transition-colors duration-300"
      >
        FOX<span class="text-fox-orange">.</span>
      </div>
      <ul
        class="hidden md:flex space-x-8 text-xs tracking-[0.2em] uppercase text-white/70"
      >
        <li
          class="hover:text-fox-orange hover:glow transition-all cursor-pointer"
        >
          <a href="#hero">Home</a>
        </li>
        <li
          class="hover:text-fox-orange hover:glow transition-all cursor-pointer"
        >
          <a href="#biography">Biography</a>
        </li>
        <li
          class="hover:text-fox-orange hover:glow transition-all cursor-pointer"
        >
          <a href="#documentary">Documentary</a>
        </li>
        <li
          class="hover:text-fox-orange hover:glow transition-all cursor-pointer"
        >
          <a href="#habitat">Habitat</a>
        </li>
      </ul>
    </nav>

    <section id="hero" class="relative w-full h-screen overflow-hidden">
      <div
        class="absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-midnight-900 to-black"
      >
        <div
          id="star-container"
          class="absolute inset-0 w-full h-full opacity-60"
        ></div>
      </div>

      <div
        class="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-[120px] pointer-events-none z-0 mix-blend-screen"
      ></div>

      <div
        id="snow-container"
        class="absolute inset-0 z-10 w-full h-full pointer-events-none"
      ></div>

      <div
        class="absolute inset-0 z-30 flex flex-col items-center justify-start pt-32 md:pt-40 pointer-events-none"
      >
        <div class="text-center mix-blend-screen drop-shadow-2xl">
          <h1
            class="text-5xl md:text-8xl font-fantasy font-black text-white tracking-widest leading-none opacity-0 animate-fade-up"
            style="animation-delay: 0.5s"
          >
            THE FOX
          </h1>
          <p
            class="text-2xl md:text-4xl font-script text-fox-gold py-1 md:py-2 drop-shadow-lg opacity-0 animate-fade-up"
            style="animation-delay: 0.8s"
          >
            and the
          </p>
          <h1
            class="text-4xl md:text-7xl font-fantasy font-bold text-white/90 tracking-wide leading-none opacity-0 animate-fade-up"
            style="animation-delay: 1.1s"
          >
            WINTER MOON
          </h1>
        </div>
      </div>

      <div
        class="absolute inset-0 z-20 flex items-end justify-center pointer-events-none pb-0"
      >
        <div
          class="w-full h-[75vh] md:h-[85vh] animate-breathe pointer-events-auto transition-transform duration-100 ease-out"
          id="model-wrapper"
        >
          <model-viewer
            id="fox-3d"
            src="assets/models/Untitled.glb"
            alt="Winter Fox"
            camera-orbit="-180deg 80deg 40%"
            field-of-view="25deg"
            shadow-intensity="2"
            disable-zoom
            interaction-prompt="none"
            class="w-full h-full"
            style="--poster-color: transparent"
          >
          </model-viewer>
        </div>

        <div
          class="absolute bottom-0 w-full h-1/2 bg-gradient-to-t from-midnight-900 via-midnight-900/80 to-transparent pointer-events-none z-20"
        ></div>
      </div>

      <div
        class="absolute bottom-12 w-full flex justify-center z-50 pointer-events-auto opacity-0 animate-fade-up"
        style="animation-delay: 2s"
      >
        <a
          href="#biography"
          class="group relative px-10 py-3 rounded-full border border-white/10 bg-white/5 backdrop-blur-sm text-sm font-fantasy tracking-widest overflow-hidden transition-all duration-500 hover:border-fox-orange hover:shadow-[0_0_30px_rgba(255,140,66,0.4)]"
        >
          <span
            class="relative z-10 group-hover:text-fox-orange transition-colors"
            >EXPLORE</span
          >
          <div
            class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"
          ></div>
        </a>
      </div>
    </section>
    <section
      id="biography"
      class="relative w-full min-h-screen bg-midnight-900 text-white py-24 px-6 z-40 overflow-hidden"
    >
      <div
        class="absolute top-0 left-0 w-full h-full opacity-5 pointer-events-none"
        style="
          background-image: radial-gradient(#ffffff 1px, transparent 1px);
          background-size: 40px 40px;
        "
      ></div>

      <div class="max-w-7xl mx-auto">
        <div class="text-center mb-20 reveal">
          <span
            class="text-fox-orange font-fantasy tracking-[0.4em] text-xs md:text-sm uppercase animate-pulse"
          >
            Vulpes Vulpes
          </span>
          <h2 class="text-4xl md:text-6xl font-fantasy font-bold mt-4">
            SURVIVING THE
            <span
              class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-600"
              >DEEP FREEZE</span
            >
          </h2>
          <p
            class="text-gray-400 mt-6 max-w-2xl mx-auto font-body font-light leading-relaxed"
          >
            Unlike bears, foxes do not hibernate. Instead, they adapt. Their
            biology transforms to conquer the sub-zero landscape.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div
            class="reveal group relative bg-white/5 border border-white/10 p-8 rounded-2xl hover:bg-white/10 transition-all duration-500 hover:-translate-y-2"
          >
            <div
              class="absolute -top-6 left-8 bg-midnight-900 border border-fox-orange p-3 rounded-full text-fox-orange"
            >
              <i class="ph-fill ph-coat-hanger text-2xl"></i>
            </div>
            <h3
              class="text-2xl font-fantasy mt-4 mb-3 group-hover:text-fox-orange transition-colors"
            >
              The Winter Coat
            </h3>
            <p class="text-gray-400 text-sm leading-relaxed font-body">
              As temperatures drop, the Red Fox grows a dense secondary layer of
              fur. This heavy coat covers their paws and ears, trapping body
              heat so effectively that they don't shiver until -70°C.
            </p>
            <div
              class="w-12 h-0.5 bg-fox-orange/50 mt-6 group-hover:w-full transition-all duration-700"
            ></div>
          </div>

          <div
            class="reveal group relative bg-white/5 border border-white/10 p-8 rounded-2xl hover:bg-white/10 transition-all duration-500 hover:-translate-y-2"
            style="transition-delay: 200ms"
          >
            <div
              class="absolute -top-6 left-8 bg-midnight-900 border border-blue-400 p-3 rounded-full text-blue-400"
            >
              <i class="ph-fill ph-crosshair text-2xl"></i>
            </div>
            <h3
              class="text-2xl font-fantasy mt-4 mb-3 group-hover:text-blue-400 transition-colors"
            >
              Magnetic Hunting
            </h3>
            <p class="text-gray-400 text-sm leading-relaxed font-body">
              Scientists believe foxes use the Earth's magnetic field to hunt.
              They can hear a mouse moving under 3 feet of snow and dive
              headfirst ("mousing") with deadly precision.
            </p>
            <div
              class="w-12 h-0.5 bg-blue-400/50 mt-6 group-hover:w-full transition-all duration-700"
            ></div>
          </div>

          <div
            class="reveal group relative bg-white/5 border border-white/10 p-8 rounded-2xl hover:bg-white/10 transition-all duration-500 hover:-translate-y-2"
            style="transition-delay: 400ms"
          >
            <div
              class="absolute -top-6 left-8 bg-midnight-900 border border-white p-3 rounded-full text-white"
            >
              <i class="ph-fill ph-moon text-2xl"></i>
            </div>
            <h3
              class="text-2xl font-fantasy mt-4 mb-3 group-hover:text-white transition-colors"
            >
              The Living Blanket
            </h3>
            <p class="text-gray-400 text-sm leading-relaxed font-body">
              Their bushy tail isn't just for balance. When sleeping in open
              snow, they curl into a tight ball and wrap their tail around their
              nose to breathe warm air.
            </p>
            <div
              class="w-12 h-0.5 bg-white/50 mt-6 group-hover:w-full transition-all duration-700"
            ></div>
          </div>
        </div>

        <div
          class="reveal mt-16 relative w-full h-[400px] md:h-[500px] rounded-3xl overflow-hidden border border-white/10 group"
          style="transition-delay: 200ms"
        >
          <img
            src="assets/image/fox_forrest.jpg"
            alt="Fox sleeping in snow"
            class="w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-105 transition-all duration-1000"
          />
          <div
            class="absolute bottom-0 left-0 w-full p-8 bg-gradient-to-t from-midnight-900 to-transparent"
          >
            <p class="font-fantasy text-xl text-white">
              "Silence is their loudest weapon."
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="documentary" class="relative w-full min-h-screen bg-midnight-900 flex flex-col justify-center items-center py-24 px-6 z-40 overflow-hidden">
      
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80vw] h-[500px] bg-blue-500/5 rounded-full blur-[150px] pointer-events-none z-0"></div>

      <div class="max-w-5xl mx-auto w-full relative z-10">
        
        <div class="text-center mb-12 reveal">
          <span class="text-blue-400 font-fantasy tracking-[0.4em] text-xs md:text-sm uppercase">
            The Reality
          </span>
          <h2 class="text-4xl md:text-5xl font-fantasy font-bold mt-4 text-white">
            INTO THE WILD
          </h2>
          <p class="text-gray-400 mt-4 max-w-xl mx-auto font-body font-light leading-relaxed">
            Witness the silent hunter in its natural habitat. See how the facts come alive in the frozen wilderness.
          </p>
        </div>

        <div class="reveal relative w-full max-w-6xl mx-auto aspect-video rounded-3xl overflow-hidden group border border-white/10 shadow-[0_0_50px_rgba(56,189,248,0.1)]" style="transition-delay: 200ms;">
          
          <video 
            class="w-full h-full object-cover relative z-10 opacity-90 group-hover:opacity-100 transition-opacity duration-1000" 
            controls 
            controlsList="nodownload"
            poster="assets/image/fox_forrest.jpg"
            preload="metadata">
            
            <source src="assets/video/Fox Dives Headfirst Into Snow _ North America.mp4" type="video/mp4">
            
            Browser kamu tidak mendukung tag video.
          </video>
          
          <div class="absolute inset-0 z-20 pointer-events-none" 
               style="background: radial-gradient(ellipse at center, transparent 50%, #020617 100%);">
          </div>
          
          <div class="absolute inset-0 z-20 pointer-events-none bg-gradient-to-b from-midnight-900 via-transparent to-midnight-900 opacity-70"></div>
          
          <div class="absolute inset-0 z-30 pointer-events-none border border-white/5 rounded-3xl group-hover:border-blue-500/30 transition-all duration-700"></div>

        </div>

        <div class="mt-8 text-center reveal">
          <p class="font-fantasy tracking-widest text-sm text-gray-500 uppercase">
            Captured in the harsh winters of the Northern Hemisphere.
          </p>
        </div>

      </div>
    </section>
    <section id="habitat" class="relative w-full min-h-screen bg-midnight-900 py-24 px-6 z-40 overflow-hidden flex flex-col justify-center">
      
      <div class="absolute inset-0 z-0 opacity-10 pointer-events-none" 
           style="background-image: linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px); background-size: 100px 100px;">
      </div>

      <div class="max-w-7xl mx-auto w-full relative z-10">
        
          <div class="text-center mb-16 reveal">
            <span class="text-fox-gold font-fantasy tracking-[0.4em] text-xs md:text-sm uppercase">
              Global Presence
            </span>
            <h2 class="text-4xl md:text-5xl font-fantasy font-bold mt-4 text-white">
              THE NORTHERN REALM
            </h2>
            <p class="text-gray-400 mt-4 max-w-xl mx-auto font-body font-light leading-relaxed">
              Red foxes are the most widely distributed carnivores in the world, thriving across the entire Northern Hemisphere.
            </p>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
            
            <div class="lg:col-span-4 space-y-8">
              
              <div class="reveal p-6 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-sm border-l-4 border-l-fox-orange">
                <p class="text-gray-400 font-body text-sm uppercase tracking-widest mb-1">Conservation Status</p>
                <h3 class="text-3xl font-fantasy text-white">Least Concern</h3>
                <p class="text-xs text-gray-500 mt-2">Population trend is stable globally.</p>
              </div>

              <div class="reveal p-6 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-sm border-l-4 border-l-blue-400" style="transition-delay: 200ms;">
                <p class="text-gray-400 font-body text-sm uppercase tracking-widest mb-1">Territory Cover</p>
                <h3 class="text-3xl font-fantasy text-white">70+ Million <span class="text-xl">km²</span></h3>
                <p class="text-xs text-gray-500 mt-2">Spanning across 4 continents.</p>
              </div>

              <div class="reveal p-6 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-sm border-l-4 border-l-white" style="transition-delay: 400ms;">
                <p class="text-gray-400 font-body text-sm uppercase tracking-widest mb-1">Subspecies</p>
                <h3 class="text-3xl font-fantasy text-white">45 Types</h3>
                <p class="text-xs text-gray-500 mt-2">Adapted to various extreme climates.</p>
              </div>

            </div>

            <div class="lg:col-span-8 relative reveal" style="transition-delay: 300ms;">
              <div class="w-full aspect-[4/3] md:aspect-[21/9] rounded-3xl bg-midnight-800 border border-white/10 overflow-hidden relative shadow-[0_0_40px_rgba(0,0,0,0.5)]">
                
                <div id="fox-map" class="w-full h-full z-0"></div>

                <div class="absolute bottom-6 right-6 text-right pointer-events-none z-20 bg-midnight-900/60 backdrop-blur-md p-4 rounded-2xl border border-white/10">
                  <p class="font-fantasy text-fox-orange tracking-widest text-lg">NORTHERN HEMISPHERE</p>
                  <p class="font-body text-xs text-gray-400 uppercase">Interactive Habitat Range</p>
                </div>

              </div>
            </div>

          </div>
      </div>
    </section>
    <footer class="relative z-40 bg-black py-8 text-center border-t border-white/5 reveal">
      <div class="text-2xl font-fantasy font-bold tracking-widest text-white/30 mb-2">FOX.</div>
      <p class="text-gray-600 font-body text-xs tracking-widest uppercase">
        © 2026 The Frozen Forest. Crafted for educational purposes.
      </p>
    </footer>

    <script src="js/script.js" defer></script>
    <script src="js/three-setup.js" defer></script>

    <!-- Diagnostic overlay script -->
    <script>
      (async function () {
        function showDiag(msg, important = false) {
          if (document.getElementById("diag-overlay")) return;
          const o = document.createElement("div");
          o.id = "diag-overlay";
          o.style.position = "fixed";
          o.style.left = "12px";
          o.style.right = "12px";
          o.style.top = "12px";
          o.style.zIndex = "9999";
          o.style.padding = "14px 16px";
          o.style.borderRadius = "8px";
          o.style.background = important ? "rgba(200,40,40,0.95)" : "rgba(0,0,0,0.8)";
          o.style.color = "white";
          o.style.fontFamily = "system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial";
          o.style.fontSize = "13px";
          o.innerHTML = msg;
          document.body.appendChild(o);
        }

        // 1) check if opened via file://
        if (location.protocol === "file:") {
          showDiag(
            "<strong>Warning:</strong> You're opening the page via <code>file://</code>. Start a local server (e.g. <code>python -m http.server 8000</code>) so assets like model & CSS load correctly.",
            true
          );
          return;
        }

        // 2) check built CSS exists
        try {
          const cssRes = await fetch("dist/output.css", { method: "HEAD" });
          if (!cssRes.ok) {
            showDiag(
              "<strong>CSS not found:</strong> dist/output.css missing. Build Tailwind CSS: <code>npm install</code> then <code>npm run build:css</code> (or <code>npx postcss css/input.css -o dist/output.css</code>)",
              true
            );
            return;
          }
        } catch (e) {
          showDiag(
            "<strong>CSS fetch failed:</strong> unable to fetch dist/output.css. Run the build command and ensure the file is served.",
            true
          );
          return;
        }

        // 3) check model asset availability
        const modelEl = document.getElementById("fox-3d");
        if (modelEl) {
          const src = modelEl.getAttribute("src");
          if (src) {
            try {
              const r = await fetch(src, { method: "HEAD" });
              if (!r.ok) {
                showDiag(
                  `<strong>3D model not found:</strong> ${src} returned ${r.status}. Place the model in assets/models/ or fix the path.`,
                  true
                );
                return;
              }
            } catch (e) {
              showDiag(
                `<strong>3D model fetch error:</strong> Could not reach ${src}. Check path/CORS and server. (${e.message})`,
                true
              );
              return;
            }
          }
        }

        // 4) no issues detected by quick tests
        // Optionally remove any existing diag overlay
        const existing = document.getElementById("diag-overlay");
        if (existing) existing.remove();
      })();
    </script>
  </body>
</html>
